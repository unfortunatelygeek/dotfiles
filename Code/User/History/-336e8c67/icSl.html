<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VirtualFit AR - Try On Clothes Virtually</title>
    <link rel="stylesheet" href="ar-styles.css">
    <link rel="stylesheet" href="myntra/Common Files/style.css">
    <link rel="stylesheet" href="../Landingpage/navbar.css">
    <link rel="stylesheet" href="../Landingpage/footer.css">
    <style>
        /* Your existing CSS styles here */
        #camera-container {
            display: none; /* Initially hide the camera container */
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
        }

        #camera-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="../Landingpage/index.html">Home</a></li>
                <li><a href="../Homepages/menHomePage.html">Men</a></li>
                <li><a href="../Homepages/womenHomePage.html">Women</a></li>
                <li><a href="../Homepages/homeLiving.html">Home Living</a></li>
                <li><a href="#try-on">Try On</a></li>
                <li><a href="#how-it-works">How It Works</a></li>
                <li><a href="../Profile/profile.html">Profile</a></li>
                <li><a href="../wishlist/wishlist.html">Wishlist</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home-secondary">
            <h1>Welcome to VirtualFit AR</h1>
            <p>Experience clothes shopping like never before with our AR try-on technology!</p>
        </section>
        
        <section id="try-on">
            <h2>Virtual Fitting Room</h2>
            <h3>Here's What you Have to Do:</h3>
            <p>Choose an Outfit from the Catalogue and add it to your wishlist</p>
            <button id="turn-on-camera">Turn On the Camera</button>
            <div id="ar-container">
                <!-- AR view container will be populated dynamically -->
            </div>
            <div id="clothing-options">
                <!-- Thumbnails of clothes to try on -->
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 VirtualFit AR. All rights reserved.</p>
        <nav>
            <ul>
                <li><a href="../Homepages/sustainability.html">Sustainability</a></li>
                <li><a href="../Homepages/voting.html">Voting</a></li>
            </ul>
        </nav>
    </footer>

    <script>
        document.getElementById('turn-on-camera').addEventListener('click', function() {
            const arContainer = document.getElementById('ar-container');
            arContainer.style.display = 'block';
            
            // Create and append the A-Frame scene
            const scene = document.createElement('a-scene');
            scene.setAttribute('embedded', '');
            scene.setAttribute('vr-mode-ui', 'enabled: false');
            scene.setAttribute('arjs', 'debugUIEnabled: false;');

            scene.innerHTML = `
                <a-assets>
                    <img id="red-shirt" width="693" height="391" crossorigin="anonymous" src="https://cdn.glitch.com/1f3b68cd-b897-4e49-bcd8-72894c36acbe%2Fred_tshirt_demo.gif">
                </a-assets>

                <a-marker preset="hiro" listener></a-marker>

                <a-image id="target" scale="9 9 9" src="#red-shirt"></a-image>

                <a-sphere material="opacity: 0.5; color: cyan;" radius="0.5"></a-sphere>

                <a-entity camera></a-entity>
            `;

            arContainer.appendChild(scene);

            // Add the listener component
            AFRAME.registerComponent("listener", {
                init: function() {
                    this.target = document.querySelector('#target');
                    this.prevPosition = null;
                },
                tick: function() {
                    if (this.el.object3D.visible) {
                        this.target.setAttribute('visible', 'true');
                        if (this.prevPosition) {
                            this.target.object3D.position.lerp(this.prevPosition, 0.2);
                        } else {
                            this.target.setAttribute('position', this.el.getAttribute('position'));
                        }
                        this.prevPosition = this.el.object3D.position;
                    }
                }
            });

            // Hide the button after clicking
            this.style.display = 'none';
        });
    </script>

    <!-- <div id="camera-container">
        <div id="camera-content">
            <iframe id="camera-frame" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var arContainer = document.getElementById('ar-container');
            var cameraButton = document.getElementById('turn-on-camera');
            var cameraContainer = document.getElementById('camera-container');
            var cameraFrame = document.getElementById('camera-frame');

            // Function to show the AR camera view
            function showCamera() {
                cameraContainer.style.display = 'block';
                arContainer.style.display = 'none';
                cameraFrame.src = 'camera.html'; 
            }

            // Event listener for the camera button click
            cameraButton.addEventListener('click', showCamera);
        });
    </script> -->
</body>
</html>
